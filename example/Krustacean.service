[Unit]
Description=Krustacean Transparent Proxy
After=network.target
StartLimitIntervalSec=10
StartLimitBurst=3

[Service]
Type=notify

User=krab
Group=krab

EnvironmentFile=/opt/Krustacean/etc/env.conf

ExecStart=/opt/Krustacean/bin/Krustacean

Restart=on-failure
RestartSec=5s

AmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
CapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
NoNewPrivileges=true

LogsDirectory=Krustacean
LogsDirectoryMode=0755

[Install]
WantedBy=multi-user.target